<div class="app-content">
  <div class="setp0" [hidden]="isBeginning">
    <h1>Declare a nest</h1>
    <p>The Asian hornets has already begun to invade French territory and its impact on bee populations and hives are devastating.
      "Bees and other pollinating insects play an important role in plant survival through ollination work, particularly
      for more than 20,000 plant species in Europe, of which 40% are fruits, vegetables or oilseeds." (Cf. Wikipedia). For
      the moment, no European action is triggered. This application is a way to fight this plague by declaring as much as
      possible Asian hornets nests. Anyone can use this application, especially during walks in the forest or anywhere, do
      not hesitate! The bees are counting on you!</p>
    <button mat-button routerLink="/signin" [hidden]="isConnected">Sign in</button>
    <button mat-button [hidden]="isConnected" (click)="step1()">Continue without account</button>
    <button mat-button [hidden]="!isConnected" (click)="step1()">Start</button>
  </div>

  <div [hidden]="isStart">
    <form [formGroup]="formGroup" (ngSubmit)="onSubmit()" novalidate>
      <mat-vertical-stepper formArrayName="formArray" [linear]="true">
        <mat-step formGroupName="0" [stepControl]="formArray.get([0])">
          <ng-template matStepLabel>Informations on the nest</ng-template>
          <h2>Pictures from the nest</h2>
          <app-google-vision (fileChange)="handleFileSelected($event)"></app-google-vision>
          <h2>Localisation</h2>
          <app-google-map (placeLocation)="handleLocation($event)"></app-google-map>
          <h3>Or</h3>
          <button mat-raised-button type="button" (click)="setLocation()">Set location</button>
          <mat-input-container [hidden]="isSetLocation">
            <input matInput placeholder="Latitude" formControlName="latitude" required>
          </mat-input-container>
          <mat-input-container [hidden]="isSetLocation">
            <input matInput placeholder="Longitude" formControlName="longitude" required>
          </mat-input-container>
          <div>
            <button mat-button matStepperNext>Next</button>
          </div>
        </mat-step>


        <mat-step formGroupName="1" [stepControl]="formArray.get([1])">
          <ng-template matStepLabel>Fill out your coordinates</ng-template>

          <mat-input-container>
            <input matInput placeholder="Name" formControlName="name" required>
            <mat-error>This field is required</mat-error>
          </mat-input-container>

          <mat-input-container>
            <input matInput placeholder="Email address" formControlName="email" required>
            <mat-error>The input is invalid</mat-error>
          </mat-input-container>

          <mat-input-container class="example-full-width">
            <span matPrefix>+33 &nbsp;</span>
            <input matInput placeholder="Telephone" pattern="[0-9]*" formControlName="phone">
            <mat-icon matSuffix>phone</mat-icon>
            <mat-error>The phone number is invalid</mat-error>
          </mat-input-container>

          <mat-input-container>
            <input matInput placeholder="comment" formControlName="comment">
          </mat-input-container>
          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button matStepperNext [disabled]="formGroup.pristine">Next</button>
          </div>
        </mat-step>
        <mat-step>
          <ng-template matStepLabel>Done</ng-template>
          You are now done.
          <div>
            <button mat-button matStepperPrevious>Back</button>
          </div>
        </mat-step>


      </mat-vertical-stepper>
    </form>



  </div>

</div>
<app-footer></app-footer>
