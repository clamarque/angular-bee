<!-- VOIR POUR AVOIR LE CHOIX ENTRE UPLOAD FICHIER OU TULISER CAMERA DU DEVICE 
https://github.com/doorKOnline/ng-video-example/blob/master/src/app/example/example.component.ts
-->
<app-google-map (latitude)="getLatitude($event)" (longitude)="getLongitude($event)"></app-google-map>
dataLocal: {{dataLocal}}
<div class="app-content">
  <form [formGroup]="formGroup">
    <mat-vertical-stepper formArrayName="formArray" [linear]="isLinear">
        <mat-step formGroupName="0" [stepControl]="formArray.get([0])">
            <ng-template matStepLabel>Localisation</ng-template>
            <mat-form-field>
              <input matInput placeholder="Latitude" formControlName="latitude" (valueChange)="updateComment($event)">
            </mat-form-field>
            <mat-form-field>
                <input matInput placeholder="Latitude" formControlName="longitude" (valueChange)="updateComment($event)">
            </mat-form-field>

            <div>
              <button mat-button matStepperPrevious>Back</button>
              <button mat-button matStepperNext>Next</button>
            </div>
        </mat-step>
      <mat-step formGroupName="0" [stepControl]="formArray.get([0])">
        <ng-template matStepLabel>Your name</ng-template>
        <mat-form-field>
          <input matInput placeholder="Name" formControlName="name" required>
          <mat-error>This field is required</mat-error>
        </mat-form-field>
        <div>
          <button mat-button matStepperNext type="button">Next</button>
        </div>
      </mat-step>
      <mat-step formGroupName="1" [stepControl]="formArray.get([1])">
        <ng-template matStepLabel>Your email</ng-template>
        <mat-form-field>
          <input matInput placeholder="Email address" formControlName="email" required>
          <mat-error>Email is invalid</mat-error>
        </mat-form-field>
        <div>
          <button mat-button matStepperPrevious type="button">Back</button>
          <button mat-button matStepperNext type="button">Next</button>
        </div>
      </mat-step>
      <mat-step formGroupName="2" [stepControl]="formArray.get([2])" optional>
          <ng-template matStepLabel>Your phone</ng-template>
          <mat-form-field class="example-full-width">
            <span matPrefix>+33 &nbsp;</span>
            <input type="tel" matInput placeholder="Telephone" formControlName="phone">
            <mat-icon matSuffix>phone</mat-icon>
          </mat-form-field>
          <div>
              <button mat-button matStepperPrevious type="button">Back</button>
              <button mat-button matStepperNext type="button">Next</button>
            </div>
      </mat-step>
      <mat-step formGroupName="3" [stepControl]="formArray.get([3])" optional>
          <ng-template matStepLabel>Fill out your comments</ng-template>
          <mat-form-field>
            <input matInput placeholder="Address" formControlName="comments">
          </mat-form-field>
          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button matStepperNext>Next</button>
          </div>
      </mat-step>
      <mat-step>
          <ng-template matStepLabel>Done</ng-template>
          You are now done.
          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button (click)="submit()">Send</button>
          </div>
        </mat-step>
    </mat-vertical-stepper>
  </form>


  <!-- 
  <mat-vertical-stepper [linear]="isLinear">
    <mat-step>
      <ng-template matStepLabel>Information on the nest</ng-template>
      <div id="drop">
        <div>
          <mat-icon>insert_photo</mat-icon>
          <h2>Drop your files here</h2>
          <p>Or click</p>
          <input type="file" name="file" id="file" class="inputfile" (change)="selectFile($event)" accept="image/*" />
          <label for="file">Choose a file</label>
        </div>
        <button mat-raised-button color="warn" class="btn btn-success" [disabled]="!selectedFiles" (click)="upload()">Upload</button>
      </div>

      <div>
        <button mat-button matStepperNext [disabled]="!isUpload">Next</button>
      </div>
    </mat-step>
-->




  <div [hidden]="!onAnalyzed">
    <mat-progress-bar mode="determinate" value="{{progress.percentage}}"></mat-progress-bar>
    <div class="progressbar-text">{{progress.percentage}}%</div>
  </div>

  <div [hidden]="!isAnalyzed">
    <mat-card class="card-bee">
      <mat-card-header>
        <mat-card-title>{{fileAnalyzedName}}</mat-card-title>
        <mat-card-subtitle>{{fileAnalyzedDate}}</mat-card-subtitle>
      </mat-card-header>
      <img mat-card-image src="{{fileAnalyzedUrl}}" alt="Analyzed picture">
      <mat-card-content>
        <div class="fullwidth">
          <mat-icon [ngStyle]="{backgroundColor: getColor()}" class="result-icon">{{getIcon()}}</mat-icon>
        </div>

        <div *ngFor="let item of items">
          <div class="analyzeItem">
            <div class="analyzeLabel">{{item.description}} : {{convertScore(item.score)}} % </div>
            <mat-progress-bar class="analyzeProgressbar" mode="determinate" [value]="convertScore(item.score)"></mat-progress-bar>
          </div>
        </div>

      </mat-card-content>
    </mat-card>

  </div>
</div>
<app-footer></app-footer>
